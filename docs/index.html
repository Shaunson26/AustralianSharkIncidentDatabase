<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.2.1/chart.umd.js"
        integrity="sha512-vCUbejtS+HcWYtDHRF2T5B0BKwVG/CLeuew5uT2AiX4SJ2Wff52+kfgONvtdATqkqQMC9Ye5K+Td0OTaz+P7cw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">
    <title>Sharks</title>

</head>

<style>
    :root {
        --darkBlue: #064273;
        --white: #ffffff;
    }

    body,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Roboto Slab', serif;
    }

    body {
        max-width: 700px;
        margin: auto;
        background-color: var(--darkBlue);
        color: white;
        font-size: 18px;

    }
</style>

<body>
    <div class="w3-container w3-center">
        <h2 class="w3-xxxlarge"><strong>A portrait of Shark incidents in Australia</strong></h2>
        <p class="w3-small">By me</p>
        <p class="w3-tiny">Updated</p>
        <p class="w3-tiny">Published</p>
    </div>

    <div class="w3-container w3-section">
        <p>Australia is known for its beautiful beaches and vibrant beach culture,
            attracting millions of visitors every year. With more than 36,000 kilometers of
            coastline, it is no surprise that Australia is also home to a diverse range of
            marine life, including many species of sharks. As a result, shark encounters and
            attacks have become a topic of concern for beachgoers and researchers alike.</p>
    </div>

    <div class="w3-container w3-section">

        <div class="w3-container w3-section">
            <h3 class="w3-border-bottom w3-border-white"><strong>When ...</strong></h3>
            <p>There have been <strong id="nIncidents">XX</strong> recorded incidents in Australia since <span
                    id="recordsSince"></span>.
                Incidents appear to be increasing, but this is heavily influenced by Australias population growth and
                the
                fact there are most people in the water.</p>
        </div>

        <div class="w3-container w3-section">
            <canvas id="incidentsByYear"></canvas>
        </div>

    </div>

    <div class="w3-container w3-section">

        <div class="w3-container w3-section">
            <h3 class="w3-border-bottom w3-border-white"><strong>Culprits ...</strong></h3>
            <p>The vast majority of these incidents (<span id="top5PctSpecies"></span> %) have been assocaited with just
                5
                shark species, but with <span id="nSpecies"></span>
                different species suspected to be involved overall.</p>
        </div>

        <div class="w3-container w3-section">
            <canvas id="incidentsBySpecies"></canvas>
        </div>

    </div>

    <div class="w3-container w3-section">
        <h2>TO BE CONTINUED</h2>
    </div>



    <div class="w3-container w3-section">
        <h3 class="w3-border-bottom w3-border-white"><strong>Where ...</strong></h3>
        <p>Most incidents have occurred in states with the highest population, however WA has a disproporinately greater
            number</p>
    </div>

    <div class="w3-container w3-section">
        <canvas id="incidentsByState"></canvas>
    </div>

    <div class="w3-container w3-section">
        <p>Activities associated with being in the water, such as swimming or (surf) boarding, pose the greatest risk of
            an encounter</p>
    </div>

    <div class="w3-container w3-section">
        <canvas id="incidentsByActivity"></canvas>
    </div>

    <div class="w3-container w3-section">
        <p>A comment on time</p>
    </div>

    <div class="w3-container w3-section">
        <canvas id="incidentsByTime"></canvas>
    </div>

    <script>

        const fetchPromise = fetch(
            "assets/data.json"
        );

        fetchPromise
            .then((response) => {
                if (!response.ok) {
                    throw new Error(`HTTP error: ${response.status}`);
                }
                return response.json();
            })
            .then((data) => {

                // Totals
                document.querySelector('#nIncidents').innerText = data.n_incidents
                document.querySelector('#recordsSince').innerText = data.incidentsByYear['Incident.year'][0]

                // Incident by year
                let incidentsByYear =
                    new Chart(
                        document.getElementById('incidentsByYear'),
                        {
                            type: 'bar',
                            data: {
                                labels: data.incidentsByYear['Incident.year'],
                                datasets: [
                                    {
                                        data: data.incidentsByYear.n,
                                        backgroundColor: 'rgba(255,255,255,0.80)',
                                    }
                                ]
                            },
                            options: vertOptions
                        }
                    )

                // Incidents by species                
                document.querySelector('#top5PctSpecies').innerText = data.incidentsBySpecies.top5PctSpecies
                document.querySelector('#nSpecies').innerText = data.incidentsBySpecies.nSpecies

                let incidentsBySpecies =
                    new Chart(
                        document.getElementById('incidentsBySpecies'),
                        {
                            type: 'bar',
                            data: {
                                labels: data.incidentsBySpecies.data['Shark.common.name'],
                                datasets: [
                                    {
                                        data: data.incidentsBySpecies.data.n,
                                        backgroundColor: 'rgba(255,255,255,0.80)'
                                    }
                                ]
                            },
                            options: horizOptions
                        }
                    )

            });


        Chart.defaults.backgroundColor = 'white';
        Chart.defaults.borderColor = 'rgba(255,255,255,0.25)';
        Chart.defaults.color = 'white';
        Chart.defaults.plugins.legend.display = false

        const data = [
            { year: 2010, count: 10 },
            { year: 2011, count: 20 },
            { year: 2012, count: 15 },
            { year: 2013, count: 25 },
            { year: 2014, count: 22 },
            { year: 2015, count: 30 },
            { year: 2016, count: 28 },
        ];

        let vertOptions = {
            scales: {
                x: {
                    grid: {
                        display: false
                    }
                },
                y: {
                    border: {
                        display: false
                    }
                }
            }
        }

        let horizOptions = {
            indexAxis: 'y',
            scales: {
                y: {
                    grid: {
                        display: false
                    }
                },
                x: {
                    border: {
                        display: false
                    }
                }
            }
        }

        new Chart(
            document.getElementById('incidentsByState'),
            {
                type: 'bar',
                data: {
                    labels: data.map(row => row.year),
                    datasets: [
                        {
                            data: data.map(row => row.count),
                            backgroundColor: 'rgba(255,255,255,0.80)'
                        }
                    ]
                },
                options: vertOptions
            }
        )

        new Chart(
            document.getElementById('incidentsByActivity'),
            {
                type: 'bar',
                data: {
                    labels: data.map(row => row.year),
                    datasets: [
                        {
                            data: data.map(row => row.count),
                            backgroundColor: 'rgba(255,255,255,0.80)'
                        }
                    ]
                },
                options: horizOptions
            }
        )

        new Chart(
            document.getElementById('incidentsByTime'),
            {
                type: 'line',
                data: {
                    labels: data.map(row => row.year),
                    datasets: [
                        {
                            data: data.map(row => row.count),
                            backgroundColor: 'rgba(255,255,255,0.80)'
                        }
                    ],
                    options: vertOptions
                }
            }
        )
    </script>


</body>

</html>